---
title: "QA-证书过期了可是服务还能用"
---
我们公司和ELK做交互的证书过期了
这个证书是双向验证的（extendedKeyUsage=[serverAuth, clientAuth]）
我们这边和ELK服务端都是启4个nodes
然后今早证书过期，可是到了下午查询服务才偶尔不可用。
问了GPT这个情况咋回事，一下是他的回答，说的头头是道，感觉他也没有骗人😂

### 不是说每次https的请求都会验证CA证书吗？为什么又说“一些客户端会在首次连接时缓存服务器的证书，以避免在每次连接时都重新验证证书”呢？

    您提出了一个很好的问题。让我澄清一下。
    
    在 HTTPS 连接中，客户端通常会验证服务器提供的证书，以确保连接的安全性。这种验证通常包括检查证书是否由受信任的证书颁发机构（CA）签发，证书是否在有效期内，以及证书中的域名是否与服务器的域名匹配等步骤。这种验证过程确保了客户端和服务器之间建立的安全连接是可信的。
    
    然而，一些客户端确实会在首次连接时缓存服务器的证书，以避免在每次连接时都重新验证证书。这是为了提高性能和降低连接延迟。一旦客户端缓存了服务器的证书，并且在证书过期后仍然使用缓存的证书进行通信，那么就可以继续正常交互，即使证书已经过期。
    
    这种行为可能存在一定的安全风险，因为过期的证书可能意味着证书私钥的安全性无法得到保证，或者证书信息已经过时。因此，尽管一些客户端可能会缓存证书以提高性能，但最佳实践仍然是在证书过期后尽快更新证书，以确保通信的安全性。
    
    希望这样能够解答您的疑问。